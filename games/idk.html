<!DOCTYPE html>
<html>
<head>
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117924862-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117924862-1');
</script>
<!--
 _______        ___.   .__.__    
 \      \   ____\_ |__ |__|  |   
 /   |   \_/ __ \| __ \|  |  |   
/    |    \  ___/| \_\ \  |  |__ 
\____|__  /\___  >___  /__|____/ 
        \/     \/    \/          
.__                              
|__| ______                      
|  |/  ___/                      
|  |\___ \                       
|__/____  >                      
        \/                       
                                 
_____                            
\__  \                           
 / __ \_                         
(____  /                         
     \/                          
___.   .__                       
\_ |__ |__| ____                 
 | __ \|  |/ ___\                
 | \_\ \  / /_/  >               
 |___  /__\___  /                
     \/  /_____/                 
                                 
   _________  ___.__.            
  / ___\__  \<   |  |            
 / /_/  > __ \\___  |            
 \___  (____  / ____|            
/_____/     \/\/                 
</!-->
<style type="text/css">
#background {
  width: 500px;
  height: 500px;
  position: relative;
  background: gray;
}
#playbutton {
  width: 300px;
  height: 50px;
  position: relative;
  top: 200px;
  left:  100px;
  background: green;
}
#player {
  display: none;
  width: 25px;
  height: 25px;
  position: relative;
  background: blue;
}
#badguy {
  display: none;
  width: 25px;
  height: 25px;
  left: 400px;
  top: 400px;
  position: relative;
  background: red;
}
#score {
  position: absolute;
}
</style>
<script type="text/javascript"></script>
<title>If you cant find the secret, you arent looking hard enough</title>
</head>
<body onload="onLoad()" id = "body">
  <div id="background">
    <h4 id = "score"></h4>
    <div id="playbutton" onclick="startGame()">
      <h1 id = "playgamelabel">play game</h1>
    </div>
    <div id="player"></div>
    <div id="badguy" style="left: 0px; top: 0px;"></div>
  </div>
  <h4>Day 1: no one found the secret</h4>
	<p>A grey background. You can move the blue thing with wasd and the red thing chases you. If it catches you, the program taunts you in a way that kinda hurts :(</p>
  <h4>Day 2: no one found the secret</h4>
    <p>First off: the red guy going out of bounds is not the secret >:(. Second off: I forgot what I changed since last time because it was so long ago. </p>
  <h4>Day 3: ??????</h4>
  
  <p>btw, when I say day, I dont mean day in a literal sense. I mean day like how some people believe in the bible, the world was built in 6 figurative days</p>
  <p>if you find the secret, you get x (4sin^3(x) + 2sin^2x - 2sinx - 1 = 0) Manx pounds</p>

  <p>if you think the game is stupid: 1. fuck you :( 2. here is some stupid meme to make you happy</p>
  <img src = "clock.jpg" draggable = "false"></img>
<script>
function onLoad() {
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    alert("this game works with phones now, so dont go away and please stay :)))))");
  } else {
   document.getElementById("playgamelabel").innerHTML = "play game and use WASD >:(";
  }
}
var movementSpeed = 25;
var playerx = 0;
var playery = 0;
var player = document.getElementById("player");
var badguyx = 400;
var badguyy = 400;

var gameIsRunning = false;
function startGame() {
  gameIsRunning = true;
  document.getElementById("playbutton").style.display = "none";
  player.style.display = "block";
  document.getElementById("badguy").style.display = "block";
  
  var score = 0;
  var id = setInterval(frame, 250);
  function frame() {
    document.getElementById("score").innerHTML = "score: " + score;
	score++;
	if (score == 300) {
	  alert("you have no life");
	}
	if (score == 1000) {
	  alert("Stop it. This is wrong. Get some help");
	}
	if (score >= 10000) {
	  alert("no");	
	}
	
    if (playerx > badguyx) {
      badguyx += movementSpeed;
    } else if (playerx < badguyx) {
      badguyx -= movementSpeed;
    }
    if (playery > badguyy) {
      badguyy += movementSpeed;
    } else if (playery < badguyy) {
      badguyy -= movementSpeed;
    }
	
    document.getElementById("badguy").style.left = badguyx + 'px';
    document.getElementById("badguy").style.top = badguyy + 'px';
	if (playerx == badguyx && playery == badguyy) {
	  document.getElementById("playbutton").style.display = "block";
	  document.getElementById("playgamelabel").innerHTML = "wow how bad do you have to be to die from that red thing. Tell Kyle Diaz you died so he can laugh at you";
	  playerx = 0;
	  playery = 0;
	  player.style.top = playery + 'px';
	  player.style.left = playerx + 'px';
	  badguyx = 400;
	  badguyy = 400;
	  clearInterval(id);
	  gameIsRunning = false;
	}
  }
}

addEventListener("keypress", keyboardManager);
function keyboardManager(event) {
  if (!gameIsRunning)
    return;
  var key = event.key;
  if ((key == 'a' || key == 'A') && playerx !== 0) {
    playerx -= movementSpeed;
  } else if ((key == 'd' || key == 'D') && playerx != 475) {
    playerx += movementSpeed;
  } else if ((key == 'w' || key == 'W') && playery !== 0) {
    playery -= movementSpeed;
  } else if ((key == 's' || key == 'S') && playery != 475) {
    playery += movementSpeed;
  }
  player.style.left = playerx + 'px';
  player.style.top = playery + 'px';
}

if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
  var touchid = setInterval(move, 100);
}
var directionH = "";
var directionV = "";
function move() {
  if (!gameIsRunning) {
	directionH = "";
	directionV = "";
	return;
  }
  if (directionH == "left" && playerx != 0)
    playerx -= movementSpeed;
  else if (directionH == "right" && playerx != 475)
    playerx += movementSpeed;
  if (directionV == "up" && playery != 0)
    playery -= movementSpeed;
  else if (directionV == "down" && playery != 475)
    playery += movementSpeed;
  player.style.top = playery + 'px';
  player.style.left = playerx + 'px';
}

let touchstartX = 0;
let touchstartY = 0;
let touchendX = 0;
let touchendY = 0;

const gestureZone = document.getElementById('body');

gestureZone.addEventListener('touchstart', function(event) {
    touchstartX = event.changedTouches[0].screenX;
    touchstartY = event.changedTouches[0].screenY;
}, false);

gestureZone.addEventListener('touchend', function(event) {
    touchendX = event.changedTouches[0].screenX;
    touchendY = event.changedTouches[0].screenY;
    handleGesture();
}, false); 

function handleGesture() {
    if (touchendX < touchstartX) {
        directionH = "left";
    }
    if (touchendX > touchstartX) {
        directionH = "right";
    }
    if (touchendY < touchstartY) {
        directionV = "up";
    }
    if (touchendY > touchstartY) {
       directionV = "down";
    }
	var deltaX = Math.abs(touchendX - touchstartX);
	var deltaY = Math.abs(touchendY - touchstartY);
	if (deltaX - deltaY >= 75)
	  directionV = "";
	else if (deltaY - deltaX >= 75)
	  directionH = "";
}
</script>
</body>
